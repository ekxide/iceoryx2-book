<svg viewBox="0 0 600 450" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .custom-fonts {
        font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }
    </style>
    <marker id="primaryHead" markerWidth="5" markerHeight="3" 
     refX="4" refY="1.5" orient="auto">
      <polygon points="0 0, 5 1.5, 0 3" fill="#6c7b7f" />
    </marker>
    <marker id="componentHead" markerWidth="5" markerHeight="3" 
     refX="4" refY="1.5" orient="auto">
      <polygon points="0 0, 5 1.5, 0 3" fill="#6b7280" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="600" height="450" fill="transparent"/>
  
  <!-- External Network Applications -->
  <rect x="225" y="60" width="45" height="19" fill="#f9fafb" stroke="#6b7280" stroke-width="2" />
  <text x="247" y="72" text-anchor="middle" class="custom-fonts" font-size="8" font-weight="bold" fill="#1f2937">DDS App</text>
  
  <rect x="278" y="60" width="45" height="19" fill="#f9fafb" stroke="#6b7280" stroke-width="2" />
  <text x="300" y="68" text-anchor="middle" class="custom-fonts" font-size="7" font-weight="bold" fill="#1f2937">Legacy</text>
  <text x="300" y="76" text-anchor="middle" class="custom-fonts" font-size="7" font-weight="bold" fill="#1f2937">App</text>
  
  <rect x="330" y="60" width="53" height="19" fill="#f9fafb" stroke="#6b7280" stroke-width="2" />
  <text x="356" y="72" text-anchor="middle" class="custom-fonts" font-size="7" font-weight="bold" fill="#1f2937">...</text>
  
  <!-- Host A Container -->
  <rect x="23" y="150" width="240" height="188" fill="none" stroke="#6c7b7f" stroke-width="2" stroke-dasharray="6,3" />
  <text x="143" y="169" text-anchor="middle" class="custom-fonts" font-size="12" font-weight="bold" fill="#6c7b7f">Host A (iceoryx2)</text>
  
  <!-- Host B Container -->
  <rect x="338" y="150" width="240" height="188" fill="none" stroke="#6c7b7f" stroke-width="2" stroke-dasharray="6,3" />
  <text x="458" y="169" text-anchor="middle" class="custom-fonts" font-size="12" font-weight="bold" fill="#6c7b7f">Host B (iceoryx2)</text>
  
  <!-- Host A Participants -->
  <rect x="38" y="184" width="53" height="19" fill="#e5e7eb" stroke="#6c7b7f" stroke-width="2" />
  <text x="64" y="196" text-anchor="middle" class="custom-fonts" font-size="8" font-weight="bold" fill="#374151">Participant</text>
  
  <rect x="98" y="184" width="53" height="19" fill="#e5e7eb" stroke="#6c7b7f" stroke-width="2" />
  <text x="124" y="196" text-anchor="middle" class="custom-fonts" font-size="8" font-weight="bold" fill="#374151">Participant</text>
  
  <!-- Host A Gateway -->
  <rect x="158" y="184" width="45" height="19" fill="#6b7280" stroke="#4b5563" stroke-width="2" />
  <text x="180" y="196" text-anchor="middle" class="custom-fonts" font-size="8" font-weight="bold" fill="white">Gateway</text>
  
  <!-- Host A Tunnel -->
  <rect x="195" y="211" width="45" height="19" fill="#6b7280" stroke="#4b5563" stroke-width="2" />
  <text x="217" y="223" text-anchor="middle" class="custom-fonts" font-size="8" font-weight="bold" fill="white">Tunnel</text>
  
  <!-- Host B Gateway -->
  <rect x="398" y="184" width="45" height="19" fill="#6b7280" stroke="#4b5563" stroke-width="2" />
  <text x="420" y="196" text-anchor="middle" class="custom-fonts" font-size="8" font-weight="bold" fill="white">Gateway</text>
  
  <!-- Host B Tunnel -->
  <rect x="360" y="211" width="45" height="19" fill="#6b7280" stroke="#4b5563" stroke-width="2" />
  <text x="382" y="223" text-anchor="middle" class="custom-fonts" font-size="8" font-weight="bold" fill="white">Tunnel</text>
  
  <!-- Host B Participants -->
  <rect x="450" y="184" width="53" height="19" fill="#e5e7eb" stroke="#6c7b7f" stroke-width="2" />
  <text x="476" y="196" text-anchor="middle" class="custom-fonts" font-size="8" font-weight="bold" fill="#374151">Participant</text>
  
  <rect x="510" y="184" width="53" height="19" fill="#e5e7eb" stroke="#6c7b7f" stroke-width="2" />
  <text x="536" y="196" text-anchor="middle" class="custom-fonts" font-size="8" font-weight="bold" fill="#374151">Participant</text>
  
  <!-- Host A Shared Memory -->
  <rect x="38" y="248" width="203" height="60" fill="#4b5563" stroke="#374151" stroke-width="2" />
  <text x="139" y="282" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="white">Shared Memory</text>
  
  <!-- Host B Shared Memory -->
  <rect x="360" y="248" width="203" height="60" fill="#4b5563" stroke="#374151" stroke-width="2" />
  <text x="461" y="282" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="white">Shared Memory</text>
  
  <!-- Vertical arrows from Host A participants to shared memory -->
  <line x1="64" y1="203" x2="64" y2="248" stroke="#6c7b7f" stroke-width="2" marker-end="url(#primaryHead)"/>
  <line x1="124" y1="203" x2="124" y2="248" stroke="#6c7b7f" stroke-width="2" marker-end="url(#primaryHead)"/>
  <line x1="180" y1="203" x2="180" y2="248" stroke="#6c7b7f" stroke-width="2" marker-end="url(#primaryHead)"/>
  <line x1="217" y1="230" x2="217" y2="248" stroke="#6c7b7f" stroke-width="2" marker-end="url(#primaryHead)"/>
  
  <!-- Vertical arrows from Host B participants to shared memory -->
  <line x1="382" y1="230" x2="382" y2="248" stroke="#6c7b7f" stroke-width="2" marker-end="url(#primaryHead)"/>
  <line x1="420" y1="203" x2="420" y2="248" stroke="#6c7b7f" stroke-width="2" marker-end="url(#primaryHead)"/>
  <line x1="476" y1="203" x2="476" y2="248" stroke="#6c7b7f" stroke-width="2" marker-end="url(#primaryHead)"/>
  <line x1="536" y1="203" x2="536" y2="248" stroke="#6c7b7f" stroke-width="2" marker-end="url(#primaryHead)"/>
  
  <!-- Direct Gateway connections between Host A and Host B -->
  <line x1="203" y1="192" x2="396" y2="192" stroke="#6b7280" stroke-width="2.5" marker-end="url(#componentHead)"/>
  <line x1="398" y1="197" x2="205" y2="197" stroke="#6b7280" stroke-width="2.5" marker-end="url(#componentHead)"/>

  <!-- Direct Tunnel connections between Host A and Host B -->
  <line x1="240" y1="218" x2="358" y2="218" stroke="#6b7280" stroke-width="2.5" marker-end="url(#componentHead)"/>
  <line x1="360" y1="223" x2="242" y2="223" stroke="#6b7280" stroke-width="2.5" marker-end="url(#componentHead)"/>
  
  <!-- Vertical arrows from external apps to gateway communication -->
  <!-- DDS App with L-shaped connection -->
  <line x1="247" y1="79" x2="247" y2="113" stroke="#6b7280" stroke-width="2"/>
  <line x1="247" y1="113" x2="285" y2="113" stroke="#6b7280" stroke-width="2"/>
  <line x1="285" y1="113" x2="285" y2="187" stroke="#6b7280" stroke-width="2" marker-end="url(#componentHead)"/>

  <!-- Legacy System connection -->
  <line x1="300" y1="79" x2="300" y2="187" stroke="#6b7280" stroke-width="2" marker-end="url(#componentHead)"/>
  
  <!-- Non-iceoryx App with L-shaped connection -->
  <line x1="356" y1="79" x2="356" y2="113" stroke="#6b7280" stroke-width="2"/>
  <line x1="356" y1="113" x2="315" y2="113" stroke="#6b7280" stroke-width="2"/>
  <line x1="315" y1="113" x2="315" y2="187" stroke="#6b7280" stroke-width="2" marker-end="url(#componentHead)"/>
  
</svg>
