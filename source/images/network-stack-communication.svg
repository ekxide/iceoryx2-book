<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="6" markerHeight="4" 
     refX="5" refY="2" orient="auto">
      <polygon points="0 0, 6 2, 0 4" fill="#6c7b7f" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="500" fill="transparent"/>
  
  <!-- Physical Memory Block -->
  <rect x="300" y="65" width="200" height="370" fill="#f9fafb" stroke="#6c7b7f" stroke-width="2"/>
  <text x="400" y="50" text-anchor="middle" font-size="16" font-weight="normal" fill="#6c7b7f">Physical Memory</text>
  
  <!-- Publisher Buffer -->
  <rect x="320" y="87" width="160" height="60" fill="#e5e7eb" stroke="#6c7b7f" stroke-width="2" stroke-dasharray="4,2"/>
  <text x="400" y="110" text-anchor="middle" font-size="12" font-weight="normal" fill="#1f2937">Participant Memory</text>
  <!-- Original data -->
  <rect x="330" y="120" width="140" height="10" fill="#4b5563"/>
  <text x="400" y="128" text-anchor="middle" font-size="9" fill="white">Original Data (100 MB)</text>
  <!-- Serialized data -->
  <rect x="330" y="133" width="140" height="10" fill="#4b5563"/>
  <text x="400" y="141" text-anchor="middle" font-size="9" fill="white">Serialized Data (~100 MB)</text>
  
  <!-- Kernel Buffers -->
  <rect x="320" y="167" width="160" height="40" fill="#f3f4f6" stroke="#6b7280" stroke-width="2"/>
  <text x="400" y="185" text-anchor="middle" font-size="12" font-weight="normal" fill="#1f2937">Network Stack</text>
  <text x="400" y="199" text-anchor="middle" font-size="10" fill="#6b7280">Buffered Data(~100 MB)</text>
  
  <!-- Subscriber 1 Buffer -->
  <rect x="320" y="227" width="160" height="50" fill="#e5e7eb" stroke="#6c7b7f" stroke-width="2" stroke-dasharray="4,2"/>
  <text x="400" y="243" text-anchor="middle" font-size="12" font-weight="normal" fill="#1f2937">Participant Memory</text>
  <!-- Received data -->
  <rect x="330" y="250" width="140" height="10" fill="#4b5563"/>
  <text x="400" y="258" text-anchor="middle" font-size="9" fill="white">Received Data (~100 MB)</text>
  <!-- Deserialized data -->
  <rect x="330" y="263" width="140" height="10" fill="#4b5563"/>
  <text x="400" y="271" text-anchor="middle" font-size="9" fill="white">Deserialized Data (100 MB)</text>
  
  <!-- Subscriber 2 Buffer -->
  <rect x="320" y="297" width="160" height="50" fill="#e5e7eb" stroke="#6c7b7f" stroke-width="2" stroke-dasharray="4,2"/>
  <text x="400" y="313" text-anchor="middle" font-size="12" font-weight="normal" fill="#1f2937">Participant Memory</text>
  <!-- Received data -->
  <rect x="330" y="320" width="140" height="10" fill="#4b5563"/>
  <text x="400" y="328" text-anchor="middle" font-size="9" fill="white">Received Data (~100 MB)</text>
  <!-- Deserialized data -->
  <rect x="330" y="333" width="140" height="10" fill="#4b5563"/>
  <text x="400" y="341" text-anchor="middle" font-size="9" fill="white">Deserialized Data (100 MB)</text>
  
  <!-- Subscriber 3 Buffer -->
  <rect x="320" y="367" width="160" height="50" fill="#e5e7eb" stroke="#6c7b7f" stroke-width="2" stroke-dasharray="4,2"/>
  <text x="400" y="383" text-anchor="middle" font-size="12" font-weight="normal" fill="#1f2937">Participant Memory</text>
  <!-- Received data -->
  <rect x="330" y="390" width="140" height="10" fill="#4b5563"/>
  <text x="400" y="398" text-anchor="middle" font-size="9" fill="white">Received Data (~100 MB)</text>
  <!-- Deserialized data -->
  <rect x="330" y="403" width="140" height="10" fill="#4b5563"/>
  <text x="400" y="411" text-anchor="middle" font-size="9" fill="white">Deserialized Data (100 MB)</text>
  
  <!-- Publisher -->
  <rect x="125" y="105" width="100" height="35" fill="#f9fafb" stroke="#6c7b7f" stroke-width="2"/>
  <text x="175" y="127" text-anchor="middle" font-size="12" font-weight="normal" fill="#1f2937">Participant</text>
  
  <!-- Subscribers -->
  <rect x="590" y="251" width="100" height="35" fill="#f9fafb" stroke="#6c7b7f" stroke-width="2"/>
  <text x="640" y="273" text-anchor="middle" font-size="12" font-weight="normal" fill="#1f2937">Participant</text>
  
  <rect x="590" y="321" width="100" height="35" fill="#f9fafb" stroke="#6c7b7f" stroke-width="2"/>
  <text x="640" y="343" text-anchor="middle" font-size="12" font-weight="normal" fill="#1f2937">Participant</text>
  
  <rect x="590" y="391" width="100" height="35" fill="#f9fafb" stroke="#6c7b7f" stroke-width="2"/>
  <text x="640" y="413" text-anchor="middle" font-size="12" font-weight="normal" fill="#1f2937">Participant</text>
  
  <!-- Data Flow Arrows -->
  
  <!-- Publisher to publisher buffer -->
  <line x1="225" y1="125" x2="330" y2="125" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="240" y="121" text-anchor="middle" font-size="10" fill="#6c7b7f">write</text>
  
  <!-- Publisher buffer to kernel -->
  <line x1="400" y1="147" x2="400" y2="165" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="415" y="158" font-size="10" fill="#6c7b7f">copy</text>
  
  <!-- Kernel buffer branching pattern -->
  <!-- Horizontal line from kernel buffer to the left -->
  <line x1="320" y1="185" x2="285" y2="185" stroke="#6c7b7f" stroke-width="2"/>
  
  <!-- Vertical line down the left side -->
  <line x1="285" y1="185" x2="285" y2="395" stroke="#6c7b7f" stroke-width="2"/>
  
  <!-- Horizontal arrows into each subscriber buffer's received data -->
  <line x1="285" y1="255" x2="330" y2="255" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="255" y="251" font-size="10" fill="#6c7b7f">copy</text>
  
  <line x1="285" y1="325" x2="330" y2="325" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="255" y="321" font-size="10" fill="#6c7b7f">copy</text>
  
  <line x1="285" y1="395" x2="330" y2="395" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="255" y="391" font-size="10" fill="#6c7b7f">copy</text>
  
  <!-- Subscribers reading from their buffers -->
  <line x1="470" y1="268" x2="590" y2="268" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="560" y="264" text-anchor="middle" font-size="10" fill="#6c7b7f">read</text>
  
  <line x1="470" y1="338" x2="590" y2="338" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="560" y="334" text-anchor="middle" font-size="10" fill="#6c7b7f">read</text>
  
  <line x1="470" y1="408" x2="590" y2="408" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="560" y="404" text-anchor="middle" font-size="10" fill="#6c7b7f">read</text>
  
  <!-- Total Memory Label -->
  <text x="400" y="465" text-anchor="middle" font-size="16" font-weight="normal" fill="#6c7b7f">Total Memory: ~900 MB</text>
  
</svg>
