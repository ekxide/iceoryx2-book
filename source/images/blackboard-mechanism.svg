<svg viewBox="0 0 600 560" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .custom-fonts {
        font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }
    </style>
    <marker id="arrowhead" markerWidth="8" markerHeight="5"
     refX="7" refY="2.5" orient="auto">
      <polygon points="0 0, 8 2.5, 0 5" fill="#6c7b7f" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="600" height="560" fill="transparent"/>

  <!-- Shared Memory -->
  <rect x="75" y="240" width="450" height="90" fill="#4b5563" stroke="#374151" stroke-width="2" />
  <text x="300" y="263" text-anchor="middle" class="custom-fonts" font-size="14" font-weight="bold" fill="white">Shared Memory Region</text>

  <!-- Key-value Repository -->
  <rect x="225" y="280" width="150" height="23" fill="#9ca3af" stroke="#6c7b7f" stroke-width="2"/>
  <text x="300" y="293" text-anchor="middle" class="custom-fonts" font-size="8" fill="white">Key-value Repository</text>

  <!-- Writer -->
  <rect x="252" y="30" width="95" height="50" fill="#f9fafb" stroke="#6c7b7f" stroke-width="2" />
  <text x="300" y="58" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="#374151">Writer</text>

  <!-- Reader -->
  <rect x="252" y="490" width="95" height="50" fill="#f9fafb" stroke="#6c7b7f" stroke-width="2" />
  <text x="300" y="518" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="#374151">Reader</text>

  <!-- EntryHandleMut for key K1 -->
  <rect x="170" y="135" width="95" height="50" fill="#f9fafb" stroke="#6c7b7f" stroke-width="2" />
  <text x="218" y="158" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="#374151">EntryHandleMut</text>
  <text x="218" y="170" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="#374151">for key K1</text>
  <text x="130" y="165" font-size="9" fill="#6c7b7f">entry id 1</text>

  <!-- EntryHandleMut for key K2 -->
  <rect x="335" y="135" width="95" height="50" fill="#f9fafb" stroke="#6c7b7f" stroke-width="2" />
  <text x="383" y="158" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="#374151">EntryHandleMut</text>
  <text x="383" y="170" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="#374151">for key K2</text>
  <text x="436" y="165" font-size="9" fill="#6c7b7f">entry id 2</text>

  <!-- EntryHandle for key K1 -->
  <rect x="170" y="385" width="95" height="50" fill="#f9fafb" stroke="#6c7b7f" stroke-width="2" />
  <text x="218" y="408" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="#374151">EntryHandle</text>
  <text x="218" y="420" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="#374151">for key K1</text>
  <text x="130" y="415" font-size="9" fill="#6c7b7f">entry id 1</text>

  <!-- EntryHandle for key K2 -->
  <rect x="335" y="385" width="95" height="50" fill="#f9fafb" stroke="#6c7b7f" stroke-width="2" />
  <text x="383" y="408" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="#374151">EntryHandle</text>
  <text x="383" y="420" text-anchor="middle" class="custom-fonts" font-size="11" font-weight="bold" fill="#374151">for key K2</text>
  <text x="436" y="415" font-size="9" fill="#6c7b7f">entry id 2</text>

  <!-- Arrows from writer to entry handles -->
  <line x1="300" y1="80" x2="218" y2="135" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="210" y="105" font-size="9" fill="#6c7b7f">entry(K1)</text>

  <line x1="300" y1="80" x2="383" y2="135" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="355" y="105" font-size="9" fill="#6c7b7f">entry(K2)</text>

  <!-- Arrows from mutable entry handles to shared memory region -->
  <line x1="218" y1="185" x2="218" y2="240" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="130" y="210" font-size="9" fill="#6c7b7f">update value for K1</text>

  <line x1="383" y1="185" x2="383" y2="240" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="395" y="210" font-size="9" fill="#6c7b7f">update value for K2</text>
  <line x1="374" y1="185" x2="374" y2="240" stroke="#6c7b7f" stroke-width="1.5" marker-end="url(#arrowhead)" stroke-dasharray="4,4"/>
  <line x1="365" y1="185" x2="365" y2="240" stroke="#6c7b7f" stroke-width="1.5" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>

  <!-- Arrows from entry handles to shared memory region -->
  <line x1="218" y1="385" x2="218" y2="330" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="112" y="365" font-size="9" fill="#6c7b7f">get copy of value for K1</text>

  <line x1="383" y1="385" x2="383" y2="330" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="395" y="365" font-size="9" fill="#6c7b7f">get copy of value for K2</text>
  <line x1="374" y1="385" x2="374" y2="330" stroke="#6c7b7f" stroke-width="1.5" marker-end="url(#arrowhead)" stroke-dasharray="4,4"/>
  <line x1="365" y1="385" x2="365" y2="330" stroke="#6c7b7f" stroke-width="1.5" marker-end="url(#arrowhead)" stroke-dasharray="3,3"/>

  <!-- Arrows from reader to entry handles -->
  <line x1="300" y1="490" x2="218" y2="435" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="210" y="470" font-size="9" fill="#6c7b7f">entry(K1)</text>

  <line x1="300" y1="490" x2="383" y2="435" stroke="#6c7b7f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="355" y="470" font-size="9" fill="#6c7b7f">entry(K2)</text>

</svg>
